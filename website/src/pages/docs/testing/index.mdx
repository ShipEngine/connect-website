---
title: ShipEngine Connect Testing
description: There are many different ways to test your ShipEngine Connect app. We provide all the tooling and guidance you need to be confident that your app works correctly.
---

import styles from "./index.module.scss";


Testing Your Application
=============================
While developing your application, it's important to run tests to verify that your project structure is in the correct format and that your code behaves as expected.
There are multiple ways to test your application, and we suggest taking advantage of all of them to ensure the highest quality integration.

If your backend API
or service has a [Sandbox Environment](https://en.wikipedia.org/wiki/Sandbox_(software_development)), we recommend using this
while you are testing to avoid sending unnecessary traffic to your production environment or incurring actual service charges. It is easy to modify
your app during local testing and [acceptance testing](#acceptance-testing).

You will
need to [publish](./../cli.mdx#publish-your-app) your app with your sandbox environment configured to perform [live testing](#live-testing).
You should then configure your app to use your production environment and then republish your app.

Live Testing
-----------------------------
As you go through the development process, you can [publish](./../publish.mdx) your app to
our development platform where you can perform live testing through one of our e-commerce applications, such as
[ShipStation](https://www.shipstation.com/), before it is promoted to our production platform.

It may be useful to do this as you make additions to your code so you can see the changes as they are made.

With the goal of being able to successfully use your app end-to-end within these live tests, having immediate feedback and results will be instructive through the development process.

> **INFO:**
> ### What tests should I run?
> See the testing guides for [Carrier Apps](./carrier-apps.mdx) and [Order Apps](./order-apps.mdx).



![Adding a carrier in ShipStation](/img/testing/shipstation.png)


Acceptance Testing
-----------------------------
[The `connect test` command](./../cli.mdx#test-your-app) validates your application against acceptance our test suite. These tests are integration tests that represent real world, end-to-end scenarios.
Rather than calling a single, individual method, these tests may make calls to multiple methods in order to construct a more realistic workflow.


For example, to cancel a shipment, an end user interacting with your application would need to authenticate and create a shipment before cancelling it. Therefore a
single test may authenticate by calling your [`connect` method](./../reference/methods/connect.mdx), create a shipment using your
[`createShipment` method](./../reference/methods/create-shipment.mdx), and then use your [`cancelShipments` method](./../reference/methods/cancel-shipments.mdx) to
cancel the shipment.

These tests execute the entire application, so you won't be able to run this suite until you have finished implementing all the methods
in your application. For this reason, we recommend using the `connect start` command to perform testing during iterative development.

Once you have completed development,
this test suite can provide a higher degree of confidence that the application will work as expected when used from within one of our
e-commerce applications since this suite calls your application in the same manner in which it will be used in production.

The acceptance test suite is both customizable and extendable via the [`connect.config.js` file](./config.mdx).

> **INFO:**
> ### What tests are run?
> See the complete lists of tests for [Carrier Apps](../carrier-app/tests/index.mdx) and [Order Apps](../order-app/tests/index.mdx).


Unit Testing
-----------------------------
We recommend that in addition to local and automated tests, we recommend that you also you write unit tests for your application. We don't include any
tooling or impose any restrictions on which tools you can use for writing unit tests. You are free to use any JavaScript tools you are comfortable with,
such as these:

#### [Jest](https://jestjs.io/)
Jest is a batteries-included, zero-configuration test runner that is approachable for beginners, extensible for almost all testing use cases and scalable to large projects.
It includes the test runner, an assertion library, and extensible matchers - everything you need to being writing unit tests.

#### [Mocha](https://mochajs.org/)
Mocha is a feature-rich JavaScript test framework running on Node.js and in the browser. Mocha tests run serially, allowing for flexible and accurate reporting, while mapping uncaught exceptions to the correct test cases.

#### [Chai](https://www.chaijs.com/)
Chai is a Business Driven Development (BDD) / Test Driven Development (TDD) assertion library for node and the browser that can be depaired with any javascript testing framework, such as Mocha.

#### [Sinon](https://sinonjs.org/)
Sinon is a standalone tool that provides test spies, stubs and mocks for JavaScript and works with any unit testing framework.

#### [Nock](https://github.com/nock/nock)
Nock is an HTTP server mocking and expectations library for Node.js. It can be used to test modules that perform HTTP requests in isolation. This can be useful
in mocking out your backend API for unit testing.

### Example
Here's an example unit test suite using [Mocha](https://mochajs.org/) and [Chai](https://www.chaijs.com/) to test [the `createShipment` method](./../reference/methods/create-shipment.mdx).

> **NOTE:** When creating mock parameters for your methods, you only need to populate the properties that you actually use in your code

```javascript
const createShipment = require("../src/methods/create-shipment.js");
const { expect } = require("chai");

describe("createShipment test suite", () => {
  let transaction, shipmentCriteria;

  beforeEach("Create mock parameters", () => {
    transaction = {
      id: "e62eff07-a9f6-4075-80d1-ca4ab788a6fe",
      language: "en-US",
      session: {
        token: "cj8Aro60dfa4abe62erQ07"
      }
    };

    shipmentCriteria = {
      deliveryService: { code: "NXT_DAY" },
      deliveryConfirmatmion: { code: "SIG" },
      shipFrom: {
        name: { given: "John", family: "Doe" },
        addressLines: ["4009 Marathon Blvd"],
        cityLocality: "Austin",
        stateProvince: "TX",
        postalCode: "78756",
        country: "US"
      },
      shipTo: {
        name: { given: "Amanda", family: "Miller" },
        addressLines: ["525 S Winchester Blvd"],
        cityLocality: "San Jose",
        stateProvince: "CA",
        postalCode: "95128",
        country: "US"
      },
      packages: [{
        packaging: { code: "BOX" },
        weight: { ounces: 36 },
        label: {
          format: "pdf",
          size: "4x6"
        }
      }]
    };
  });

  it("should create a shipment without insurance", async () => {
    let shipment = await createShipment(transaction, shipmentCriteria);

    expect(shipment).to.be.an("object");
    expect(shipment.deliveryDateTime).to.be.an.instanceOf(Date);
    expect(shipment.charges).to.be.an("array").with.lengthOf(1);
    expect(shipment.charges[0].type).to.equal("delivery");
    expect(shipment.charges[0].name).to.equal("Delivery Charge");
  });

  it("should create a shipment with insurance", async () => {
    shipmentCriteria.packages[0].insuredValue = { value: 500, currency: "USD" };
    let shipment = await createShipment(transaction, shipmentCriteria);

    expect(shipment).to.be.an("object");
    expect(shipment.deliveryDateTime).to.be.an.instanceOf(Date);
    expect(shipment.charges).to.be.an("array").with.lengthOf(2);
    expect(shipment.charges[0].type).to.equal("delivery");
    expect(shipment.charges[0].name).to.equal("Delivery Charge");
    expect(shipment.charges[1].type).to.equal("insurance");
    expect(shipment.charges[1].name).to.equal("Insurance Cost");
    expect(shipment.packages[0].metadata.isInsured).to.equal(true);
  });
});
```


<Pager
  prev="./../error-handling.mdx" prevTitle="Error Handling"
  next="./../publish.mdx" nextTitle="Publishing"
/>
