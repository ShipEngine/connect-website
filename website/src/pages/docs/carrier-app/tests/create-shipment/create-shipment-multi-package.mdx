---
title: Acceptance Tests | createShipment_multipackage
description: This test is part of the ShipEngine Connect carrier app test suite.
---


Carrier App Tests
==================================

### `createShipment_multi_package`
This test exercises your app's ability to successfully create a shipment that has multiple packages. If your app does not have any multi-package [delivery services](./../../../reference/delivery-service.mdx), then this test will be skipped by [the `connect test` command](./../../../cli.mdx#test-your-app).



Test Parameters
-------------------------
This test has many parameters [that can be customized](#customizing-parameters) in your [`connect.config.js` file](./../../../testing/config.mdx). Any parameters you don't override will use their default values.

<Reference>

  <Field name="session" type="object">
    <Description>
        An object containing session information needed to make calls to your backend API or service, such as
        a username and password or an auth token.

        The data included in this object depends on your service. You will need to
        provide the information your methods need to make calls without calling your [`connect()` method](./../../../reference/methods/connect.mdx).

        If both a `connectArgs` parameter and a `session` parameter are provided, the `session` parameter will be used.
    </Description>
    <DefaultValue>
        An empty `session` unless you provide a `connectArgs` property.
    </DefaultValue>
  </Field>

  <Field name="connectArgs" type="object">
    <Description>
        An object containing properties with the same names as those you defined in
        your [connection form](./../../../reference/forms.mdx#connection-form-examples). These will be used to call your
        [`connect()` method](./../../../reference/methods/connect.mdx) to obtain a valid `session` object before calling other methods in the test.

        If both a `connectArgs` parameter and a `session` parameter are provided, the `session` parameter will be used.
    </Description>
    <DefaultValue>
        An empty `session` unless you provide a `session` property.
    </DefaultValue>
  </Field>

  <Field name="expectedErrorMessage" type="string">
    <Description>
      The error message that is expected when running this test.
      <br/> <br/>

      This property is useful in negative test cases.
      For example, you may wish to provide invalid weights and verify that the expected error message is returned.
    </Description>
    <DefaultValue>
      None
    </DefaultValue>
  </Field>

  <Field name="debug" type="boolean">
    <Description>
      Whether or not to run in `debug` mode.
    </Description>
    <DefaultValue>
      `false`
    </DefaultValue>
  </Field>

  <Field name="timeout" type="number">
    <Description>
      The number of of milliseconds to wait before timing out an asynchronous operation.
    </Description>
    <DefaultValue>
      `3000`
    </DefaultValue>
  </Field>

  <Field name="skip" type="boolean">
    <Description>
      Whether or not to skip this test.
    </Description>
    <DefaultValue>
      `false`
    </DefaultValue>
  </Field>

  <Field name="retries" type="number">
    <Description>
      Indicates the number of times to retry the test when a failure is encountered.
    </Description>
    <DefaultValue>
      `0`
    </DefaultValue>
  </Field>

  <Field name="deliveryServiceName" type="string">
    <Description>
         The name of the [delivery service](./../../../reference/delivery-service.mdx) you wish to use in this request.
    </Description>
    <DefaultValue>
      The name of first domestic delivery service defined for your app.
    </DefaultValue>
  </Field>

  <Field name="shipFrom">
    <Type>
        [address + contact object](./../../../reference/address.mdx)
    </Type>
    <Description>
        The address to ship _from_ in the test. Be sure to include the additional contact info properties.
    </Description>
    <DefaultValue>
        A valid address based on the `availableCountries` of the delivery service.

        Note that this is the default value used when no `shipFrom` parameter is specified.

        If a `shipFrom` parameter is specified, it must contain values for all properties.
    </DefaultValue>
  </Field>

  <Field name="shipTo">
    <Type>
        [address + contact object](./../../../reference/address.mdx)
    </Type>
    <Description>
        The address to ship _to_ in the test. Be sure to include the additional contact info properties.
    </Description>
    <DefaultValue>
        A valid address based on the `availableCountries` of the delivery service.

        Note that this is the default value used when no `shipTo` parameter is specified.

        If a `shipTo` parameter is specified, it must contain values for all properties.
    </DefaultValue>
  </Field>

  <Field name="shipDateTime">
    <Type>
      [date/time object](./../../../reference/date-time.mdx), <br/>
      or [Date object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date) object, <br/>
      or a string representing the date and time in [ISO](https://www.w3.org/TR/NOTE-datetime) format.
    </Type>
    <Description>
      The date/time that the package is expected to ship. This is not guaranteed to be in the future.
    </Description>
    <DefaultValue>
        The following date at `noon` in the local time zone.
    </DefaultValue>
  </Field>

  <Field name="packages" type="object[]">
    <Description>
      An array of objects representing the packages in this shipment.
    </Description>
    <DefaultValue>
        The properties and their default values are listed below. Note that these are the default values used when no `packages` parameter is specified.

        If a `packages` parameter is specified, it must contain values for all required properties.
    </DefaultValue>
  </Field>

  <Field name="packages[].packagingName" type="string">
    <Description>
        The [delivery confirmation](./../../../reference/delivery-confirmation.mdx) to use for this package.
    </Description>
  </Field>

  <Field name="packages[].label" type="object">
    <Description>
      An object representing the details of the label to be produced by this method.
    </Description>
    <DefaultValue>
        The properties and their default values are listed below. Note that these are the default values used when no `packages[].label` parameter is specified.

        If a `packages[].label` parameter is specified, it must contain values for all required properties.
    </DefaultValue>
  </Field>

  <Field name="packages[].label.size" type="string">
    <Description>
        The size of the label. Valid values include the following:
         * `A4`- A4 sized paper ( 8.27 inches x 11.69 inches)
         * `letter` - Letter sized paper (8.5 inches by 11 inches)
         * `4x6` - Paper sized 4 inches by 6 inches
         * `4x8` - Paper sized 4 inches by 8 inches
    </Description>
    <DefaultValue>
        The first `labelSize` found for the specified [delivery service](./../../../reference/delivery-service.mdx).
    </DefaultValue>
  </Field>

  <Field name="packages[].label.format" type="string">
    <Description>
        The format for the label. Valid values include the following:
        * `pdf` - Portable Document Format (PDF)
        * `zpl` - Zebra Printer Label (ZPL)
        * `png` - Portable Graphics Format (PNG)
    </Description>
    <DefaultValue>
        The first `labelFormat` found for the specified [delivery service](./../../../reference/delivery-service.mdx).
    </DefaultValue>
  </Field>

  <Field name="packages[].label.referenceFields" type="string[]">
    <Description>
        Some carriers provide general-purpose fields on their labels for custom text.
        This is sometimes used for messages, like "Thank you for shopping with us!",
        or may be used to store reference data, such as account numbers, warehouse codes, etc.

        The exact location on the label depends on the carrier, as does the allowed number of fields
        and the maximum length of each field. If more fields are specified than are supported by the
        carrier, then the extra fields should be ignored. Likewise, if a field length exceeds the
        carrier's maximum length, then it should be truncated. The *actual* values that are used
        should be returned, so the caller can detect any differences.

        NOTE: These fields should NOT be used to set *named* fields on the label,
        such as "RMA Number" or "Order ID". Those should be set using the correspond
        properties of the shipment.
    </Description>
    <DefaultValue>
      None
    </DefaultValue>
  </Field>

  <Field name="packages[].weight" type="object">
    <Description>
      The weight to use for the shipment.
    </Description>
    <DefaultValue>
        The properties and their default values are listed below. Note that these are the default values used when no `packages[].weight` parameter is specified.

        If a `packages[].weight` parameter is specified, it must contain values for all required properties.
    </DefaultValue>
  </Field>

  <Field name="packages[].weight.unit" type="string">
    <Description>
        The unit of measure for this weight. Valid values include the following:
        * `g` - grams
        * `oz` - ounces
        * `kg` - kilograms
        * `lb` - pounds

    </Description>
    <DefaultValue>
        `lb`
    </DefaultValue>
  </Field>

  <Field name="packages[].weight.value" type="number">
    <Description>
      The value for this weight.
    </Description>
    <DefaultValue>
        `50`
    </DefaultValue>
  </Field>

  <Field name="packages[].dimensions" type="object">
    <Description>
      The dimensions for the package.
    </Description>
    <DefaultValue>
       The properties and their default values are listed below. Note that these are the default values used when no `dimensions` parameter is specified.

       If a `dimensions` parameter is specified, it must contain values for all properties.
    </DefaultValue>
  </Field>

  <Field name="packages[].dimensions.length" type="number">
    <Description>
      The length of the to use for the shipment.
    </Description>
    <DefaultValue>
      `12`
    </DefaultValue>
  </Field>

  <Field name="packages[].dimensions.width" type="number">
    <Description>
      The width to use for the shipment.
    </Description>
    <DefaultValue>
      `12`
    </DefaultValue>
  </Field>

  <Field name="packages[].dimensions.height" type="number">
    <Description>
      The height to use for the shipment.
    </Description>
    <DefaultValue>
      `12`
    </DefaultValue>
  </Field>

  <Field name="packages[].dimensions.unit" type="string">
    <Description>
      The unit of measurement for the dimensions. Valid values include the following:
        * `in` - inches
        * `cm` - centimeters
    </Description>
    <DefaultValue>
      `in`
    </DefaultValue>
  </Field>

  <Field name="packages[].deliveryConfirmationName" type="string">
    <Description>
        The name of the [delivery confirmation](./../../../reference/delivery-confirmation.mdx) to use for this shipment.
    </Description>
    <DefaultValue>
        The first delivery confirmation defined for the specified delivery service, or `undefined` if no
        delivery confirmations are supported for the selected delivery service.
    </DefaultValue>
  </Field>

</Reference>


Customizing Parameters
------------------------------
Here's an example of using the [`connect.config.js` file](./../../../testing/config.mdx) to customize the `createShipment_multi_package` test.
This example provides values for all parameters and uses the global `connectArgs` parameter for authentication.

```javascript
module.exports = {
  connectArgs: {
    account_email: 'user@example.com',
    account_password: 'u0G#^08Ue1G!jX$mkc1',
    agree_to_eula: true,
  },
  tests: {
    createShipment_multi_package: [
      {
        deliveryServiceName: 'Domestic Standard',
        deliveryConfirmationName: 'Adult Signature',
        shipFrom: {
          name: 'John Doe',
          phoneNumber: '111-111-1111',
          company: 'Example Corp.',
          addressLines: [
            '4009 Marathon Blvd',
            'Suite 300'
          ],
         cityLocality: 'Austin',
         stateProvince: 'TX',
         postalCode: '78756',
         country: 'US',
         isResidential: false
        },
        shipTo: {
          name: 'Amanda Miller',
          phoneNumber: '555-555-5555',
          addressLines: [
            '525 S Winchester Blvd'
          ],
          cityLocality: 'San Jose',
          stateProvince: 'CA',
          postalCode: '95128',
          country: 'US',
        },
        shipDateTime: '2020-04-15T12:00:00-05:00',
        packages: [
          {
            packagingName: 'Package',
            label: {
              size: 'letter',
              format: 'pdf'
            },
            weight: {
              value: 100,
              unit: 'lb'
            },
            dimensions: {
              width: 10,
              height: 10,
              length: 10,
              unit: 'in'
            },
          },
          {
            packagingName: 'Package',
            label: {
              size: 'A4',
              format: 'pdf'
            },
            weight: {
              value: 75,
              unit: 'lb'
            },
            dimensions: {
              width: 15,
              height: 15,
              length: 15,
              unit: 'in'
            },
          },
          {
            packagingName: 'Package',
            label: {
              size: 'letter',
              format: 'pdf'
            },
            weight: {
              value: 100
              unit: 'lb'
            },
            dimensions: {
              width: 5,
              height: 5,
              length: 5,
              unit: 'in'
            },
          }
        ]
      }
    ]
  }
}
```
