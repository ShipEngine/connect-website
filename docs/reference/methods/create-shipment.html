<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>createShipment Method | ShipEngine Connect</title><meta content="utf-8" http-equiv="encoding"/><meta content="text/html;charset=utf-8" http-equiv="Content-Type"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="robots" content="noindex, nofollow"/><meta name="st:robots" content="follow, index"/><link rel="canonical" href="https://connect.shipengine.com/docs/reference/methods/create-shipment"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@ShipEngineAPI"/><meta name="twitter:creator" content="@ShipEngineAPI"/><meta name="twitter:title" content="createShipment Method"/><meta name="twitter:url" content="https://connect.shipengine.com/docs/reference/methods/create-shipment"/><meta name="twitter:image" content="https://connect.shipengine.com/img/media/card-square.png"/><meta name="twitter:description" content="This method creates a new shipment."/><meta property="og:locale" content="en_US"/><meta property="og:site_name" name="author" content="ShipEngine Connect"/><meta property="og:url" content="https://connect.shipengine.com/docs/reference/methods/create-shipment"/><meta property="og:title" name="title" content="createShipment Method" class="swiftype" data-type="string"/><meta property="og:image" name="image" content="https://connect.shipengine.com/img/media/card-square.png" class="swiftype" data-type="enum"/><meta property="og:description" name="description" content="This method creates a new shipment." class="swiftype" data-type="text"/><meta property="og:type" content="article"/><meta property="article:section" content="documentation"/><meta property="article:published_time" name="published_at" content="2022-05-23T20:34:23.538Z" class="swiftype" data-type="date"/><meta property="article:modified_time" name="updated_at" content="2022-05-23T20:34:23.538Z" class="swiftype" data-type="date"/><script type="application/ld+json">[{"@context":"http://schema.org","@type":["Service","WebAPI"],"name":"ShipEngine Connect","serviceType":"API","category":"Internet Service > API","url":"https://connect.shipengine.com/","image":"https://connect.shipengine.com/img/media/card-square.png","logo":"https://connect.shipengine.com/img/logos/shipengine-connect-logo.png","documentation":{"@context":"http://schema.org","@type":"APIReference","name":"ShipEngine Connect","headline":"ShipEngine Connect","description":"Integrate your carrier or marketplace with our world class e-commerce solutions and gain immediate access to a global user base","keywords":"","url":"https://connect.shipengine.com/docs","image":"https://connect.shipengine.com/img/media/card-square.png","isAccessibleForFree":true,"targetPlatform":"http","dateCreated":"2022-05-23T20:34:23.538Z","dateModified":"2022-05-23T20:34:23.538Z","author":{"@type":"Organization","name":"ShipEngine","telephone":"1 (512) 856-5379","email":"connect@shipengine.com","url":"https://connect.shipengine.com/","logo":"https://connect.shipengine.com/img/logos/shipengine-connect-logo.png"}},"termsOfService":"https://connect.shipengine.com/terms-of-service","description":"This method creates a new shipment.","provider":{"@type":"Organization","name":"ShipEngine","telephone":"1 (512) 856-5379","email":"connect@shipengine.com","url":"https://connect.shipengine.com/","logo":"https://connect.shipengine.com/img/logos/shipengine-connect-logo.png"}},{"@context":"http://schema.org","@type":"APIReference","name":"ShipEngine Connect","headline":"createShipment Method","description":"This method creates a new shipment.","keywords":"","url":"https://connect.shipengine.com/docs/reference/methods/create-shipment","image":"https://connect.shipengine.com/img/media/card-square.png","isAccessibleForFree":true,"targetPlatform":"NodeJS","dateCreated":"2022-05-23T20:34:23.538Z","dateModified":"2022-05-23T20:34:23.538Z","author":{"@type":"Organization","name":"ShipEngine","telephone":"1 (512) 856-5379","email":"connect@shipengine.com","url":"https://connect.shipengine.com/","logo":"https://connect.shipengine.com/img/logos/shipengine-connect-logo.png"}}]</script><link rel="icon" type="image/png" sizes="32x32" href="/img/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/favicons/favicon-16x16.png"/><link rel="apple-touch-icon" sizes="180x180" href="/img/favicons/apple-touch-icon-180x180.png"/><link rel="apple-touch-icon" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="60x60" href="/img/favicons/apple-touch-icon-60x60.png"/><link rel="mask-icon" href="/img/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="apple-mobile-web-app-title" content="ShipEngine Connect"/><meta name="application-name" content="ShipEngine Connect"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/img/favicons/mstile-144x144.png"/><meta name="msapplication-config" content="/browserconfig.xml"/><meta name="theme-color" content="#ffffff"/><link rel="manifest" href="/site.webmanifest"/><script>!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";analytics.load("ftxwmcSBxfMQgHFM29qNvegJAqbsZq3v");analytics.page();}}();</script><meta name="next-head-count" content="11"/><link rel="preload" href="/_next/static/css/88fb68d5c7be720d2136.css" as="style"/><link rel="stylesheet" href="/_next/static/css/88fb68d5c7be720d2136.css" data-n-g=""/><link rel="preload" href="/_next/static/css/2be9a053c247fdc0bad2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2be9a053c247fdc0bad2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-d3c771ab8682f4a400d6.js" defer=""></script><script src="/_next/static/chunks/framework-8734539471b7f505b80a.js" defer=""></script><script src="/_next/static/chunks/main-6ed46873283eb77e5b5e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-86d1a3ee013cef61a780.js" defer=""></script><script src="/_next/static/chunks/1783-13d2558ec0f4d8acaf5f.js" defer=""></script><script src="/_next/static/chunks/pages/docs/reference/methods/create-shipment-b9cf5c6b80b59f65e726.js" defer=""></script><script src="/_next/static/YFMKh3E4H0mCisCl0fgei/_buildManifest.js" defer=""></script><script src="/_next/static/YFMKh3E4H0mCisCl0fgei/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="header_siteHeader__Z1OM-"><a id="site-logo" class="header_siteLogo__3_PHa" href="/"><img src="/img/logos/shipengine-connect-logo.svg" alt="Shipengine Connect"/></a><form class="header_siteSearchForm__2un1A invisible" method="get" action="https://www.google.com/search"><label for="site-search" class="visually-hidden">ShipEngine Connect Docs Search</label><input type="search" id="site-search" class="st-default-search-input" name="q" placeholder="Search"/><input type="hidden" name="as_sitesearch" value="connect.shipengine.com"/></form></header><div id="page-background"><div id="docs-page"><nav class="menu_menu__2EBQr"><button id="menu-button" class="menu_menuButton__1OMOw"></button><ul class="menu_menuList__1rqjy nav-menu "><li><details class="menu_group__1Tyby" open=""><summary>Start Here</summary><ul class="menu_groupList__QhMIb"><li><div class="menu_subGroup__1cqMy ">Overview</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/">Welcome</a></li><li><a class="menu_menuItem__26A3z " href="/docs">Getting Started</a></li><li><a class="menu_menuItem__26A3z " href="/docs/structure">App Structure</a></li><li><a class="menu_menuItem__26A3z " href="/docs/tools">Recommended Tools</a></li></ul></li><li><div class="menu_subGroup__1cqMy ">Guides</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/contributing">Contribution Guide</a></li><li><a class="menu_menuItem__26A3z " href="/docs/style">Style Guide</a></li><li><a class="menu_menuItem__26A3z " href="/docs/cli">Using the CLI</a></li><li><a class="menu_menuItem__26A3z " href="/docs/create-first-app">Creating Your First App</a></li><li><a class="menu_menuItem__26A3z " href="/docs/implementation">Implementing Your Methods</a></li><li><a class="menu_menuItem__26A3z " href="/docs/typescript">Developing in TypeScript</a></li><li><a class="menu_menuItem__26A3z " href="/docs/environment-variables">Environment Variables</a></li><li><a class="menu_menuItem__26A3z " href="/docs/error-handling">Error Handling</a></li><li><a class="menu_menuItem__26A3z " href="/docs/testing">Testing</a></li><li><a class="menu_menuItem__26A3z " href="/docs/publish">Publishing</a></li></ul></li><li><div class="menu_subGroup__1cqMy ">Reference</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/changelog">Changelog</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/forms">Form Definitions</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/transaction">Carrier App Transaction</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/order-transaction">Order App Transaction</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/address">Address</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/common-types">Common Types</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/country-codes">Country Codes</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/shipping-preferences">Shipping Preference</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/charge">Charge</a></li></ul></li></ul></details></li><li><details class="menu_group__1Tyby" open=""><summary>Carrier Apps</summary><ul class="menu_groupList__QhMIb"><li><div class="menu_subGroup__1cqMy ">Overview</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/carrier-app">Overview</a></li><li><a class="menu_menuItem__26A3z " href="/docs/carrier-app/map-services">How to map services</a></li></ul></li><li><div class="menu_subGroup__1cqMy ">App Structure</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/reference/carrier">Carrier App</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/delivery-service">Delivery Service</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/pickup-service">Pickup Service</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/packaging">Packaging</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/delivery-confirmation">Delivery Confirmation</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/forms">Form Definitions</a></li></ul></li><li><div class="menu_subGroup__1cqMy menu_selected__TJy72">Methods</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/connect">connect</a></li><li><a class="menu_menuItem__26A3z menu_selected__TJy72" href="/docs/reference/methods/create-shipment">createShipment</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/cancel-shipments">cancelShipments</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/track-shipment">trackShipment</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/rate-shipment">rateShipment</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/create-manifest">createManifest</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/schedule-pickup">schedulePickup</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/cancel-pickups">cancelPickups</a></li></ul></li></ul></details></li><li><details class="menu_group__1Tyby" open=""><summary>Order Apps</summary><ul class="menu_groupList__QhMIb"><li><div class="menu_subGroup__1cqMy ">Overview</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/order-app">Overview</a></li><li><a class="menu_menuItem__26A3z " href="/docs/oauth">Authorization</a></li></ul></li><li><div class="menu_subGroup__1cqMy ">App Structure</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/reference/order">Order App</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/forms#order-apps">Form Definitions</a></li></ul></li><li><div class="menu_subGroup__1cqMy ">Methods</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/get-sales-orders-by-date">getSalesOrdersByDate</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/shipment-created">shipmentCreated</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/acknowledge-orders">acknowledgeOrders</a></li></ul></li></ul></details></li><li><details class="menu_group__1Tyby" open=""><summary>Service</summary><ul class="menu_groupList__QhMIb"><li><a class="menu_menuItem__26A3z " href="https://help.shipengine.com/">FAQ</a></li><li><a class="menu_menuItem__26A3z " href="https://help.shipengine.com/hc/en-us/requests/new">Support</a></li><li><a class="menu_menuItem__26A3z " href="https://status.shipengine.com/">API Status</a></li><li><a class="menu_menuItem__26A3z " href="https://www.shipengine.com/terms-of-service/">Terms of Service</a></li><li><a class="menu_menuItem__26A3z " href="https://www.shipengine.com/privacy-policy/">Privacy Policy</a></li></ul></details></li><li><details class="menu_group__1Tyby" open=""><summary>Community</summary><ul class="menu_groupList__QhMIb"><li><a class="menu_menuItem__26A3z " href="https://www.shipengine.com/blog/">Blog</a></li><li><a class="menu_menuItem__26A3z " href="https://www.meetup.com/Austin-Homegrown-API/">Meetup Group</a></li></ul></details></li></ul></nav><main data-swiftype-name="body" data-swiftype-type="text"><article><div class="section"><div class="section-group left-group"><h1 class="html_h1__3_ac7 "><code>createShipment()</code></h1><p>This method creates a new shipment.</p><h2 class="html_h2__RJd8Q "><span id="syntax" class="html_headingAnchor__2mM-B" aria-hidden="true"></span>Syntax<a href="#syntax" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h2><div class="code-wrapper_codeWrapper__ssrf6"><pre class="language-javascript code-wrapper_selectedCodeBlock__ISwuh code-block_pre__2tvH1"><code class="code-block_codeBlock__18cdI"><div class="line_line__3fO_7 "><span class="token plain">module</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">createShipment</span><span class="token punctuation">(</span><span class="token parameter">transaction</span><span class="token parameter punctuation">,</span><span class="token parameter"> shipment</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="token plain">  </span><span class="token comment">// Your code here</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></code></pre><pre class="language-typescript code-wrapper_codeBlock__lj1ex code-block_pre__2tvH1"><code class="code-block_codeBlock__18cdI"><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="1"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token maybe-class-name">Transaction</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token maybe-class-name">NewShipment</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token maybe-class-name">ShipmentConfirmation</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&quot;@shipengine/connect&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="2"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="3"></span><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">createShipment</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="4"></span><span class="token plain">  </span><span class="token parameter">transaction</span><span class="token parameter punctuation">:</span><span class="token parameter"> Transaction</span><span class="token parameter punctuation">,</span><span class="token parameter"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="5"></span><span class="token parameter">  shipment</span><span class="token parameter punctuation">:</span><span class="token parameter"> NewShipment</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="6"></span><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token maybe-class-name">ShipmentConfirmation</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="7"></span><span class="token plain">  </span><span class="token comment">// Your code here</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="8"></span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></code></pre><form class="invisible code-toolbar_codeToolbar__2r1kC"><button class="button-small">Copy</button><span class="select language-list_languageList__3_g6S language-list_javascript__1RPTJ select_select__2imJS " role="listbox" tabindex="0"><span class="select-label select_selectLabel__2aKYc">javascript</span><span class="select-options select_selectOptions__1F77G "><div class="language-list_language__3ZpVE language-list_javascript__1RPTJ select_option__3vGSw" role="option" aria-selected="true" tabindex="0" data-value="javascript">JavaScript</div><div class="language-list_language__3ZpVE language-list_typescript__1WIoa select_option__3vGSw" role="option" aria-selected="false" tabindex="0" data-value="typescript">TypeScript</div></span></span></form></div><h2 class="html_h2__RJd8Q "><span id="parameters" class="html_headingAnchor__2mM-B" aria-hidden="true"></span>Parameters<a href="#parameters" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h2><h3 class="html_h3__1_Y-e "><span id="transaction" class="html_headingAnchor__2mM-B" aria-hidden="true"></span><code>transaction</code><a href="#transaction" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h3><p>A <a href="/docs/reference/transaction">transaction object</a> containing information about the transaction and session state.</p><h3 class="html_h3__1_Y-e "><span id="shipment" class="html_headingAnchor__2mM-B" aria-hidden="true"></span><code>shipment</code><a href="#shipment" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h3><p>An object containing information about the new shipment to create.</p><div class="reference-table_referenceTableWrapper___5de3"><div class="reference-table_toggleLayout__13NAd"><button class="toggle-layout_button__2Sx6u" disabled="" title="Table view"><img src="/img/icons/reference-table.svg" alt="Table view"/></button><button class="toggle-layout_button__2Sx6u" title="Switch to list view"><img src="/img/icons/reference-list.svg" alt="Switch to list view"/></button></div><table><thead><tr><th>Name</th><th>Type</th><th>Nullable?</th><th>Description</th></tr></thead><tbody><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryService</span></code></td><td><p><a href="/docs/reference/delivery-service-object#delivery-service-argument">delivery service object</a></p></td><td class="centered"></td><td><p>An object that identifies a <a href="/docs/reference/delivery-service">delivery service</a> that is offered by a carrier.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>shipFrom</span></code></td><td><p><a href="/docs/reference/address#address-contact-info-properties">address + contact info object</a></p></td><td class="centered"></td><td><p>The address <em>from</em> which the shipment is being shipped.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>shipTo</span></code></td><td><p><a href="/docs/reference/address#address-contact-info-properties">address + contact info object</a></p></td><td class="centered"></td><td><p>The address <em>to</em> which the shipment is being shipped.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>pickupLocation</span></code></td><td><p><a href="/docs/reference/address#address-contact-info-pickup-location-properties">address + contact info + pickup location object</a></p></td><td class="centered">✔</td><td><p>The location where the recipient can pick up the shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>returnTo</span></code></td><td><p><a href="/docs/reference/address#address-contact-info-properties">address + contact info object</a></p></td><td class="centered"></td><td><p>The address to which to send the shipment in the case of a return. This may be different from the <code>shipFrom</code> address if the customer uses a centralized returns processing facility.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>shipDateTime</span></code></td><td><p><a href="/docs/reference/date-time">date/time object</a></p></td><td class="centered"></td><td><p>The date/time that the package is expected to ship. This is not guaranteed to be in the future.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>totalInsuredValue</span></code></td><td>object</td><td class="centered"></td><td><p>The total insured value of all packages in the shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>totalInsuredValue.value</span></code></td><td>number</td><td class="centered"></td><td><p>The value of the insured amount.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>totalInsuredValue
<!-- -->   <!-- -->.</span><span>currency</span></code></td><td>string</td><td class="centered"></td><td><p>The currency that the value represents.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>isNonMachineable</span></code></td><td>boolean</td><td class="centered"></td><td><p>Indicates whether the shipment cannot be processed automatically due to size, shape, weight, etc. and requires manual handling. This property is <code>true</code> if any package in the shipment is non-machinable.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>returns</span></code></td><td>object</td><td class="centered"></td><td><p>An object that indicates whether or not this shipment is a return shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>returns.isReturn</span></code></td><td>boolean</td><td class="centered"></td><td><p>Indicates whether or not this shipment is a return shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>returns.rmaNumber</span></code></td><td>string</td><td class="centered"></td><td><p>A <a href="https://en.wikipedia.org/wiki/Return_merchandise_authorization">return merchandise authorization (RMA)</a> is an associated number assigned to process the return. This number is often printed on the label and used when the original shipper processes the inbound return. This string will not contain newline characters.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages</span></code></td><td><p><a href="/docs/reference/new-package-object">new package object[]</a></p></td><td class="centered"></td><td><p>The list of packages in this shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>package</span></code></td><td><p><a href="/docs/reference/new-package-object">new package object</a></p></td><td class="centered"></td><td><p>Returns the first package in the <code>packages</code> array. Useful for carriers that only support single-piece shipments.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryConfirmation</span></code></td><td><p><a href="/docs/reference/delivery-confirmation-object#delivery-confirmation-argument">delivery confirmation object</a></p></td><td class="centered">✔</td><td><p>The requested <a href="/docs/reference/delivery-confirmation">delivery confirmation</a> for this shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>shippingOptions</span></code></td><td><p><a href="/docs/reference/shipping-options">shipping options</a></p></td><td class="centered">✔</td><td><p>The shipping options that are required for this shipment.</p></td></tr></tbody></table></div><h2 class="html_h2__RJd8Q "><span id="return-value" class="html_headingAnchor__2mM-B" aria-hidden="true"></span>Return Value<a href="#return-value" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h2><h3 class="html_h3__1_Y-e "><span id="shipmentconfirmation" class="html_headingAnchor__2mM-B" aria-hidden="true"></span><code>shipmentConfirmation</code><a href="#shipmentconfirmation" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h3><p>An object that contains confirmation that a shipment has been created.</p><div class="reference-table_referenceTableWrapper___5de3"><div class="reference-table_toggleLayout__13NAd"><button class="toggle-layout_button__2Sx6u" disabled="" title="Table view"><img src="/img/icons/reference-table.svg" alt="Table view"/></button><button class="toggle-layout_button__2Sx6u" title="Switch to list view"><img src="/img/icons/reference-list.svg" alt="Switch to list view"/></button></div><table><thead><tr><th>Name</th><th>Type</th><th>Required?</th><th>Description</th></tr></thead><tbody><tr><td><code class="reference-table_preLine__1NAPb"><span>label</span></code></td><td>object</td><td class="centered">✔</td><td><p>An object representing the shipping label details.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>label.name</span></code></td><td>string</td><td class="centered"></td><td><p>The user-friendly name of the label. This string must not contain newline characters.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>label.type</span></code></td><td>string</td><td class="centered">✔</td><td><p>The type of document. This value should always be <code>label</code> for label objects. This object type is also used for
customs forms and scan forms.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>label.size</span></code></td><td>string</td><td class="centered">✔</td><td><p>The size of the label. Valid values include the following:</p><ul><li><code>A4</code>- A4 sized paper ( 8.27 inches x 11.69 inches)</li><li><code>letter</code> - Letter sized paper (8.5 inches by 11 inches)</li><li><code>4x6</code> - Paper sized 4 inches by 6 inches</li><li><code>4x8</code> - Paper sized 4 inches by 8 inches</li></ul></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>label.format</span></code></td><td>string</td><td class="centered">✔</td><td><p>The file format of the label. Valid values include the following:</p><ul><li><code>pdf</code> - Portable Document Format (PDF)</li><li><code>zpl</code> - Zebra Printer Label (ZPL)</li><li><code>png</code> - Portable Graphics Format (PNG)</li></ul></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>label.data</span></code></td><td><p><a href="https://nodejs.org/api/buffer.html">Buffer object</a></p></td><td class="centered">✔</td><td><p>The label data, in the specified file format.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>label.referenceFields</span></code></td><td>string[]</td><td class="centered">✔</td><td><p>The <strong>actual</strong> reference fields on the label, which may not match the originally-specified reference fields due to the carrier&#x27;s restrictions on the number of fields or the length of each field. Each string in this array must not contain newline characters.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>charges</span></code></td><td><p><a href="/docs/reference/charge">charge object[]</a></p></td><td class="centered">✔</td><td><p>The breakdown of charges for this shipment.  If the carrier does not provide a detailed breakdown, then just use a single charge of type &quot;shipping&quot;.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>form</span></code></td><td>object</td><td class="centered"></td><td><p>An object representing a form, such as a customs form or scan form.</p><p>This property is not required. If it is provided, it must contain all of its required properties, listed below.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>form.name</span></code></td><td>string</td><td class="centered"></td><td><p>The user-friendly name of the form (e.g. &quot;Customs Form&quot;, &quot;Scan Form&quot;). This string must not contain newline characters.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>form.type</span></code></td><td>string</td><td class="centered">✔</td><td><p>The type of form. This value should be <code>customs_form</code> or <code>scan_form</code>.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>form.size</span></code></td><td>string</td><td class="centered">✔</td><td><p>The size of the form. Valid values include the following:</p><ul><li><code>A4</code>- A4 sized paper ( 8.27 inches x 11.69 inches)</li><li><code>letter</code> - Letter sized paper (8.5 inches by 11 inches)</li><li><code>4x6</code> - Paper sized 4 inches by 6 inches</li><li><code>4x8</code> - Paper sized 4 inches by 8 inches</li></ul></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>form.format</span></code></td><td>string</td><td class="centered">✔</td><td><p>The file format of the form. Valid values include the following:</p><ul><li><code>pdf</code> - Portable Document Format (PDF)</li><li><code>zpl</code> - Zebra Printer Label (ZPL)</li><li><code>png</code> - Portable Graphics Format (PNG)</li></ul></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>form.data</span></code></td><td><p><a href="https://nodejs.org/api/buffer.html">Buffer object</a></p></td><td class="centered">✔</td><td><p>The form data, in the specified file format.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>trackingNumber</span></code></td><td>string</td><td class="centered"></td><td><p>The master tracking number for the entire shipment. For single-piece shipments, this will be the same as the package tracking number. For multi-piece shipments, this may be a separate tracking number, or the same tracking number as one of the packages. This string must not contain newline characters.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>identifiers</span></code></td><td><p><a href="/docs/reference/identifiers-object">identifiers object</a></p></td><td class="centered"></td><td><p>Your own identifiers for this shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryDateTime</span></code></td><td><p><a href="/docs/reference/date-time">date/time object</a>, <br/>
or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Date object</a> object, <br/>
or a string representing the date and time in <a href="https://www.w3.org/TR/NOTE-datetime">ISO</a> format.</p></td><td class="centered"></td><td><p>The estimated date and time the shipment will be delivered.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages</span></code></td><td>object[]</td><td class="centered"></td><td><p>An array of objects containing confirmation details about each package in the shipment. This array will contain at least one item.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].trackingNumber</span></code></td><td>string</td><td class="centered"></td><td><p>The master tracking number for the entire shipment. For single-piece shipments, this will be the same as the package tracking number. For multi-piece shipments, this may be a separate tracking number, or the same tracking number as one of the packages. This string must not contain newline characters.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].identifiers</span></code></td><td><p><a href="/docs/reference/identifiers-object">identifiers object</a></p></td><td class="centered"></td><td><p>Your own identifiers for this package.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].metadata</span></code></td><td>object</td><td class="centered"></td><td><p>Custom data about this package that will be persisted by ShipEngine Connect. Must be JSON serializable.</p></td></tr></tbody></table></div><h2 class="html_h2__RJd8Q "><span id="example" class="html_headingAnchor__2mM-B" aria-hidden="true"></span>Example<a href="#example" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h2><div class="code-wrapper_codeWrapper__ssrf6"><pre class="language-javascript code-wrapper_selectedCodeBlock__ISwuh code-block_pre__2tvH1"><code class="code-block_codeBlock__18cdI"><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="1"></span><span class="token plain">module</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">createShipment</span><span class="token punctuation">(</span><span class="token parameter">transaction</span><span class="token parameter punctuation">,</span><span class="token parameter"> shipment</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="2"></span><span class="token plain">  </span><span class="token comment">// STEP 1: Validation</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="3"></span><span class="token plain">  </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> parcel </span><span class="token keyword">of</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">packages</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="4"></span><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">parcel</span><span class="token punctuation">.</span><span class="token property-access">packaging</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token constant">OWN_PACKAGING</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> parcel</span><span class="token punctuation">.</span><span class="token property-access">weight</span><span class="token punctuation">.</span><span class="token property-access">grams</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">100000</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="5"></span><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">parcel</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">packaging</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string"> cannot weigh more than 100 kilograms</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="6"></span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="7"></span><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="8"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="9"></span><span class="token plain">  </span><span class="token comment">// STEP 2: Create the data that the carrier&#x27;s API expects</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="10"></span><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> data </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="11"></span><span class="token plain">    operation</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&quot;generate_label&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="12"></span><span class="token plain">    session_id</span><span class="token punctuation">:</span><span class="token plain"> transaction</span><span class="token punctuation">.</span><span class="token property-access">session</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="13"></span><span class="token plain">    service_code</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">deliveryService</span><span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="14"></span><span class="token plain">    confirmation_code</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">deliveryConfirmation</span><span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="15"></span><span class="token plain">    ship_date</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">shipDateTime</span><span class="token punctuation">.</span><span class="token method function property-access">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="16"></span><span class="token plain">    from_zone</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">shipFrom</span><span class="token punctuation">.</span><span class="token property-access">postalCode</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="17"></span><span class="token plain">    to_zone</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">shipTo</span><span class="token punctuation">.</span><span class="token property-access">postalCode</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="18"></span><span class="token plain">    total_weight</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">package</span><span class="token punctuation">.</span><span class="token property-access">weight</span><span class="token punctuation">.</span><span class="token property-access">ounces</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="19"></span><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="20"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="21"></span><span class="token plain">  </span><span class="token comment">// STEP 3: Call the carrier&#x27;s API</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="22"></span><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> response </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">await</span><span class="token plain"> apiClient</span><span class="token punctuation">.</span><span class="token method function property-access">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> data </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="23"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="24"></span><span class="token plain">  </span><span class="token comment">// STEP 4: Create the output data that ShipEngine expects</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="25"></span><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token keyword">await</span><span class="token plain"> </span><span class="token function">formatShipment</span><span class="token punctuation">(</span><span class="token plain">response</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="26"></span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></code></pre><pre class="language-typescript code-wrapper_codeBlock__lj1ex code-block_pre__2tvH1"><code class="code-block_codeBlock__18cdI"><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="1"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="2"></span><span class="token plain">  </span><span class="token maybe-class-name">ChargeType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="3"></span><span class="token plain">  </span><span class="token maybe-class-name">DocumentFormat</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="4"></span><span class="token plain">  </span><span class="token maybe-class-name">DocumentSize</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="5"></span><span class="token plain">  </span><span class="token maybe-class-name">DocumentType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="6"></span><span class="token plain">  </span><span class="token maybe-class-name">NewShipment</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="7"></span><span class="token plain">  </span><span class="token maybe-class-name">ShipmentConfirmation</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="8"></span><span class="token plain">  </span><span class="token maybe-class-name">Transaction</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="9"></span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&quot;@shipengine/connect&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="10"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="11"></span><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">createShipment</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="12"></span><span class="token plain">  </span><span class="token parameter">transaction</span><span class="token parameter punctuation">:</span><span class="token parameter"> Transaction</span><span class="token parameter operator">&lt;</span><span class="token parameter">Session</span><span class="token parameter operator">&gt;</span><span class="token parameter punctuation">,</span><span class="token parameter"> shipment</span><span class="token parameter punctuation">:</span><span class="token parameter"> NewShipment</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token maybe-class-name">ShipmentConfirmation</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="13"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="14"></span><span class="token plain">  </span><span class="token comment">// STEP 1: Validation</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="15"></span><span class="token plain">  </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> parcel </span><span class="token keyword">of</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">packages</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="16"></span><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">parcel</span><span class="token punctuation">.</span><span class="token property-access">packaging</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> box</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> parcel</span><span class="token punctuation">.</span><span class="token property-access">weight</span><span class="token punctuation">.</span><span class="token property-access">ounces</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token number">150</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="17"></span><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">parcel</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">packaging</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string"> cannot weigh more than 150 pounds</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="18"></span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="19"></span><span class="token plain">    </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">parcel</span><span class="token punctuation">.</span><span class="token property-access">packaging</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> bag</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> parcel</span><span class="token punctuation">.</span><span class="token property-access">weight</span><span class="token punctuation">.</span><span class="token property-access">ounces</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token number">45</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="20"></span><span class="token plain">      </span><span class="token keyword">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">parcel</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">packaging</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string"> cannot weigh more than 45 pounds</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="21"></span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="22"></span><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="23"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="24"></span><span class="token plain">  </span><span class="token comment">// STEP 2: Create the data that the carrier&#x27;s API expects</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="25"></span><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> data</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">GenerateLabelRequest</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="26"></span><span class="token plain">    operation</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&quot;generate_label&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="27"></span><span class="token plain">    session_id</span><span class="token punctuation">:</span><span class="token plain"> transaction</span><span class="token punctuation">.</span><span class="token property-access">session</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="28"></span><span class="token plain">    service_code</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">deliveryService</span><span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="29"></span><span class="token plain">    confirmation_code</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">deliveryConfirmation</span><span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="30"></span><span class="token plain">    ship_date</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">shipDateTime</span><span class="token punctuation">.</span><span class="token method function property-access">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="31"></span><span class="token plain">    from_zone</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">shipFrom</span><span class="token punctuation">.</span><span class="token property-access">postalCode</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="32"></span><span class="token plain">    to_zone</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">shipTo</span><span class="token punctuation">.</span><span class="token property-access">postalCode</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="33"></span><span class="token plain">    total_weight</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token keyword">package</span><span class="token punctuation">.</span><span class="token property-access">weight</span><span class="token punctuation">.</span><span class="token property-access">ounces</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="34"></span><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="35"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="36"></span><span class="token plain">  </span><span class="token comment">// STEP 3: Call the carrier&#x27;s API</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="37"></span><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> response </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">await</span><span class="token plain"> apiClient</span><span class="token punctuation">.</span><span class="token property-access">request</span><span class="token operator">&lt;</span><span class="token maybe-class-name">GenerateLabelResponse</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> data </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="38"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="39"></span><span class="token plain">  </span><span class="token comment">// STEP 4: Create the output data that ShipEngine expects</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="40"></span><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">formatShipment</span><span class="token punctuation">(</span><span class="token plain">response</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="41"></span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></code></pre><form class="invisible code-toolbar_codeToolbar__2r1kC"><button class="button-small">Copy</button><span class="select language-list_languageList__3_g6S language-list_javascript__1RPTJ select_select__2imJS " role="listbox" tabindex="0"><span class="select-label select_selectLabel__2aKYc">javascript</span><span class="select-options select_selectOptions__1F77G "><div class="language-list_language__3ZpVE language-list_javascript__1RPTJ select_option__3vGSw" role="option" aria-selected="true" tabindex="0" data-value="javascript">JavaScript</div><div class="language-list_language__3ZpVE language-list_typescript__1WIoa select_option__3vGSw" role="option" aria-selected="false" tabindex="0" data-value="typescript">TypeScript</div></span></span></form></div></div><div class="section-group right-group"><nav id="table-of-contents" class="table-of-contents_toc__2VPfA"><a href="#">createShipment()</a><a href="#syntax">Syntax</a><a href="#parameters">Parameters</a><a href="#return-value">Return Value</a><a href="#example">Example</a></nav></div></div></article></main></div></div><footer class="footer_siteFooter__ugPCM"><div class="centered-content"><nav class="footer_footerNav__2pDuj"><div class="footer_column__21zWj"><div class="footer_columnHeading__RUP2K">Products</div><ul><li><a href="https://www.shipengine.com/shipping/">Shipping</a></li></ul><div class="footer_columnHeading__RUP2K">Pricing</div><ul><li><a href="https://www.shipengine.com/pricing/">Plans</a></li></ul></div><div class="footer_column__21zWj"><div class="footer_columnHeading__RUP2K">Solutions</div><ul><li><a href="https://www.shipengine.com/e-commerce-platforms/">E-commerce Platforms</a></li><li><a href="https://www.shipengine.com/third-party-logistics/">Third Party Logistics</a></li><li><a href="https://www.shipengine.com/brands/">Brands</a></li></ul><div class="footer_columnHeading__RUP2K">Integrations</div><ul><li><a href="https://www.shipengine.com/integrations/carriers/">Carriers</a></li><li><a href="https://www.shipengine.com/integrations/marketplaces/">Marketplaces</a></li></ul></div><div class="footer_column__21zWj"><div class="footer_columnHeading__RUP2K">Developers</div><ul><li><a href="https://www.shipengine.com/docs/">Documentation</a></li><li><a href="https://status.shipengine.com/">API Status</a></li></ul></div><div class="footer_column__21zWj"><div class="footer_columnHeading__RUP2K">Company</div><ul><li><a href="https://www.shipengine.com/about/">About</a></li><li><a href="https://www.shipengine.com/customers/">Customers</a></li><li><a href="https://www.shipengine.com/blog/">Blog</a></li><li><a href="https://www.shipengine.com/contact/">Contact</a></li><li><a href="https://help.shipengine.com/">Support</a></li><li><a href="https://gear.shipengine.com/">ShipEngine Gear Shop</a></li><li><a href="https://www.shipengine.com/privacy-policy/">Privacy Policy</a></li><li><a href="https://www.shipengine.com/terms-of-service/">Terms of Service</a></li></ul></div><div class="footer_socialMediaIcons__1UaL_"><div class="heading visually-hidden">Social Media</div><ul><li><a href="https://www.instagram.com/shipengineapi/" class="footer_instagram__HpTyY"><span class="visually-hidden">ShipEngine on Instagram</span></a></li><li><a href="https://www.facebook.com/ShipEngineAPI/" class="footer_facebook__3HupI"><span class="visually-hidden">ShipEngine on Facebook</span></a></li><li><a href="https://twitter.com/ShipEngineAPI" class="footer_twitter__I4Q8B"><span class="visually-hidden">ShipEngine on Twitter</span></a></li><li><a href="https://www.linkedin.com/company/shipengine/" class="footer_linkedin__2R042"><span class="visually-hidden">ShipEngine on LinkedIn</span></a></li></ul></div></nav><p class="footer_copyright__2o-gO">© 2019 Shipengine. All rights reserved</p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/docs/reference/methods/create-shipment","query":{},"buildId":"YFMKh3E4H0mCisCl0fgei","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>