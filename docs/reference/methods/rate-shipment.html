<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>rateShipment Method | ShipEngine Connect</title><meta content="utf-8" http-equiv="encoding"/><meta content="text/html;charset=utf-8" http-equiv="Content-Type"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="robots" content="noindex, nofollow"/><meta name="st:robots" content="follow, index"/><link rel="canonical" href="https://connect-v1.shipengine.com/docs/reference/methods/rate-shipment"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@ShipEngineAPI"/><meta name="twitter:creator" content="@ShipEngineAPI"/><meta name="twitter:title" content="rateShipment Method"/><meta name="twitter:url" content="https://connect-v1.shipengine.com/docs/reference/methods/rate-shipment"/><meta name="twitter:image" content="https://connect-v1.shipengine.com/img/media/card-square.png"/><meta name="twitter:description" content="This method calculates the shipping costs for a shipment, or multiple permutations of a shipment, to allow your customers to select the best rate."/><meta property="og:locale" content="en_US"/><meta property="og:site_name" name="author" content="ShipEngine Connect"/><meta property="og:url" content="https://connect-v1.shipengine.com/docs/reference/methods/rate-shipment"/><meta property="og:title" name="title" content="rateShipment Method" class="swiftype" data-type="string"/><meta property="og:image" name="image" content="https://connect-v1.shipengine.com/img/media/card-square.png" class="swiftype" data-type="enum"/><meta property="og:description" name="description" content="This method calculates the shipping costs for a shipment, or multiple permutations of a shipment, to allow your customers to select the best rate." class="swiftype" data-type="text"/><meta property="og:type" content="article"/><meta property="article:section" content="documentation"/><meta property="article:published_time" name="published_at" content="2022-05-23T22:22:10.655Z" class="swiftype" data-type="date"/><meta property="article:modified_time" name="updated_at" content="2022-05-23T22:22:10.655Z" class="swiftype" data-type="date"/><script type="application/ld+json">[{"@context":"http://schema.org","@type":["Service","WebAPI"],"name":"ShipEngine Connect","serviceType":"API","category":"Internet Service > API","url":"https://connect-v1.shipengine.com/","image":"https://connect-v1.shipengine.com/img/media/card-square.png","logo":"https://connect-v1.shipengine.com/img/logos/shipengine-connect-logo.png","documentation":{"@context":"http://schema.org","@type":"APIReference","name":"ShipEngine Connect","headline":"ShipEngine Connect","description":"Integrate your carrier or marketplace with our world class e-commerce solutions and gain immediate access to a global user base","keywords":"","url":"https://connect-v1.shipengine.com/docs","image":"https://connect-v1.shipengine.com/img/media/card-square.png","isAccessibleForFree":true,"targetPlatform":"http","dateCreated":"2022-05-23T22:22:10.655Z","dateModified":"2022-05-23T22:22:10.655Z","author":{"@type":"Organization","name":"ShipEngine","telephone":"1 (512) 856-5379","email":"connect@shipengine.com","url":"https://connect-v1.shipengine.com/","logo":"https://connect-v1.shipengine.com/img/logos/shipengine-connect-logo.png"}},"termsOfService":"https://connect-v1.shipengine.com/terms-of-service","description":"This method calculates the shipping costs for a shipment, or multiple permutations of a shipment, to allow your customers to select the best rate.","provider":{"@type":"Organization","name":"ShipEngine","telephone":"1 (512) 856-5379","email":"connect@shipengine.com","url":"https://connect-v1.shipengine.com/","logo":"https://connect-v1.shipengine.com/img/logos/shipengine-connect-logo.png"}},{"@context":"http://schema.org","@type":"APIReference","name":"ShipEngine Connect","headline":"rateShipment Method","description":"This method calculates the shipping costs for a shipment, or multiple permutations of a shipment, to allow your customers to select the best rate.","keywords":"","url":"https://connect-v1.shipengine.com/docs/reference/methods/rate-shipment","image":"https://connect-v1.shipengine.com/img/media/card-square.png","isAccessibleForFree":true,"targetPlatform":"NodeJS","dateCreated":"2022-05-23T22:22:10.655Z","dateModified":"2022-05-23T22:22:10.655Z","author":{"@type":"Organization","name":"ShipEngine","telephone":"1 (512) 856-5379","email":"connect@shipengine.com","url":"https://connect-v1.shipengine.com/","logo":"https://connect-v1.shipengine.com/img/logos/shipengine-connect-logo.png"}}]</script><link rel="icon" type="image/png" sizes="32x32" href="/img/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/favicons/favicon-16x16.png"/><link rel="apple-touch-icon" sizes="180x180" href="/img/favicons/apple-touch-icon-180x180.png"/><link rel="apple-touch-icon" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="60x60" href="/img/favicons/apple-touch-icon-60x60.png"/><link rel="mask-icon" href="/img/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="apple-mobile-web-app-title" content="ShipEngine Connect"/><meta name="application-name" content="ShipEngine Connect"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/img/favicons/mstile-144x144.png"/><meta name="msapplication-config" content="/browserconfig.xml"/><meta name="theme-color" content="#ffffff"/><link rel="manifest" href="/site.webmanifest"/><script>!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";analytics.load("ftxwmcSBxfMQgHFM29qNvegJAqbsZq3v");analytics.page();}}();</script><meta name="next-head-count" content="11"/><link rel="preload" href="/_next/static/css/88fb68d5c7be720d2136.css" as="style"/><link rel="stylesheet" href="/_next/static/css/88fb68d5c7be720d2136.css" data-n-g=""/><link rel="preload" href="/_next/static/css/2be9a053c247fdc0bad2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2be9a053c247fdc0bad2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-d3c771ab8682f4a400d6.js" defer=""></script><script src="/_next/static/chunks/framework-8734539471b7f505b80a.js" defer=""></script><script src="/_next/static/chunks/main-6ed46873283eb77e5b5e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-86d1a3ee013cef61a780.js" defer=""></script><script src="/_next/static/chunks/1783-4ee1551b0dc2849b073d.js" defer=""></script><script src="/_next/static/chunks/pages/docs/reference/methods/rate-shipment-67459a973fc179069a9b.js" defer=""></script><script src="/_next/static/xm6gAVI8G4BgGZs7KyjTp/_buildManifest.js" defer=""></script><script src="/_next/static/xm6gAVI8G4BgGZs7KyjTp/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="header_siteHeader__Z1OM-"><a id="site-logo" class="header_siteLogo__3_PHa" href="/"><img src="/img/logos/shipengine-connect-logo.svg" alt="Shipengine Connect"/></a><form class="header_siteSearchForm__2un1A invisible" method="get" action="https://www.google.com/search"><label for="site-search" class="visually-hidden">ShipEngine Connect Docs Search</label><input type="search" id="site-search" class="st-default-search-input" name="q" placeholder="Search"/><input type="hidden" name="as_sitesearch" value="connect-v1.shipengine.com"/></form></header><div id="page-background"><div id="docs-page"><nav class="menu_menu__2EBQr"><button id="menu-button" class="menu_menuButton__1OMOw"></button><ul class="menu_menuList__1rqjy nav-menu "><li><details class="menu_group__1Tyby" open=""><summary>Start Here</summary><ul class="menu_groupList__QhMIb"><li><div class="menu_subGroup__1cqMy ">Overview</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/">Welcome</a></li><li><a class="menu_menuItem__26A3z " href="/docs">Getting Started</a></li><li><a class="menu_menuItem__26A3z " href="/docs/structure">App Structure</a></li><li><a class="menu_menuItem__26A3z " href="/docs/tools">Recommended Tools</a></li></ul></li><li><div class="menu_subGroup__1cqMy ">Guides</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/contributing">Contribution Guide</a></li><li><a class="menu_menuItem__26A3z " href="/docs/style">Style Guide</a></li><li><a class="menu_menuItem__26A3z " href="/docs/cli">Using the CLI</a></li><li><a class="menu_menuItem__26A3z " href="/docs/create-first-app">Creating Your First App</a></li><li><a class="menu_menuItem__26A3z " href="/docs/implementation">Implementing Your Methods</a></li><li><a class="menu_menuItem__26A3z " href="/docs/typescript">Developing in TypeScript</a></li><li><a class="menu_menuItem__26A3z " href="/docs/environment-variables">Environment Variables</a></li><li><a class="menu_menuItem__26A3z " href="/docs/error-handling">Error Handling</a></li><li><a class="menu_menuItem__26A3z " href="/docs/testing">Testing</a></li><li><a class="menu_menuItem__26A3z " href="/docs/publish">Publishing</a></li></ul></li><li><div class="menu_subGroup__1cqMy ">Reference</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/changelog">Changelog</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/forms">Form Definitions</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/transaction">Carrier App Transaction</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/order-transaction">Order App Transaction</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/address">Address</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/common-types">Common Types</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/country-codes">Country Codes</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/shipping-preferences">Shipping Preference</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/charge">Charge</a></li></ul></li></ul></details></li><li><details class="menu_group__1Tyby" open=""><summary>Carrier Apps</summary><ul class="menu_groupList__QhMIb"><li><div class="menu_subGroup__1cqMy ">Overview</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/carrier-app">Overview</a></li><li><a class="menu_menuItem__26A3z " href="/docs/carrier-app/map-services">How to map services</a></li></ul></li><li><div class="menu_subGroup__1cqMy ">App Structure</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/reference/carrier">Carrier App</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/delivery-service">Delivery Service</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/pickup-service">Pickup Service</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/packaging">Packaging</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/delivery-confirmation">Delivery Confirmation</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/forms">Form Definitions</a></li></ul></li><li><div class="menu_subGroup__1cqMy menu_selected__TJy72">Methods</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/connect">connect</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/create-shipment">createShipment</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/cancel-shipments">cancelShipments</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/track-shipment">trackShipment</a></li><li><a class="menu_menuItem__26A3z menu_selected__TJy72" href="/docs/reference/methods/rate-shipment">rateShipment</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/create-manifest">createManifest</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/schedule-pickup">schedulePickup</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/cancel-pickups">cancelPickups</a></li></ul></li></ul></details></li><li><details class="menu_group__1Tyby" open=""><summary>Order Apps</summary><ul class="menu_groupList__QhMIb"><li><div class="menu_subGroup__1cqMy ">Overview</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/order-app">Overview</a></li><li><a class="menu_menuItem__26A3z " href="/docs/oauth">Authorization</a></li></ul></li><li><div class="menu_subGroup__1cqMy ">App Structure</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/reference/order">Order App</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/forms#order-apps">Form Definitions</a></li></ul></li><li><div class="menu_subGroup__1cqMy ">Methods</div><ul class="menu_subGroupList__3gBaa"><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/get-sales-orders-by-date">getSalesOrdersByDate</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/shipment-created">shipmentCreated</a></li><li><a class="menu_menuItem__26A3z " href="/docs/reference/methods/acknowledge-orders">acknowledgeOrders</a></li></ul></li></ul></details></li><li><details class="menu_group__1Tyby" open=""><summary>Service</summary><ul class="menu_groupList__QhMIb"><li><a class="menu_menuItem__26A3z " href="https://help.shipengine.com/">FAQ</a></li><li><a class="menu_menuItem__26A3z " href="https://help.shipengine.com/hc/en-us/requests/new">Support</a></li><li><a class="menu_menuItem__26A3z " href="https://status.shipengine.com/">API Status</a></li><li><a class="menu_menuItem__26A3z " href="https://www.shipengine.com/terms-of-service/">Terms of Service</a></li><li><a class="menu_menuItem__26A3z " href="https://www.shipengine.com/privacy-policy/">Privacy Policy</a></li></ul></details></li><li><details class="menu_group__1Tyby" open=""><summary>Community</summary><ul class="menu_groupList__QhMIb"><li><a class="menu_menuItem__26A3z " href="https://www.shipengine.com/blog/">Blog</a></li><li><a class="menu_menuItem__26A3z " href="https://www.meetup.com/Austin-Homegrown-API/">Meetup Group</a></li></ul></details></li></ul></nav><main data-swiftype-name="body" data-swiftype-type="text"><article><div class="section"><div class="section-group left-group"><h1 class="html_h1__3_ac7 "><code>rateShipment()</code></h1><p>This method calculates the shipping costs for a shipment, or multiple permutations of a shipment, to allow your customers to select the best rate.</p><p>Most carrier apps should implement this method, unless you don&#x27;t support rating shipments.</p><h2 class="html_h2__RJd8Q "><span id="syntax" class="html_headingAnchor__2mM-B" aria-hidden="true"></span>Syntax<a href="#syntax" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h2><div class="code-wrapper_codeWrapper__ssrf6"><pre class="language-javascript code-wrapper_selectedCodeBlock__ISwuh code-block_pre__2tvH1"><code class="code-block_codeBlock__18cdI"><div class="line_line__3fO_7 "><span class="token plain">module</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">rateShipment</span><span class="token punctuation">(</span><span class="token parameter">transaction</span><span class="token parameter punctuation">,</span><span class="token parameter"> criteria</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="token plain">  </span><span class="token comment">// Your code here</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></code></pre><pre class="language-typescript code-wrapper_codeBlock__lj1ex code-block_pre__2tvH1"><code class="code-block_codeBlock__18cdI"><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="1"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token maybe-class-name">Transaction</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token maybe-class-name">RateCriteria</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token maybe-class-name">Rate</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&quot;@shipengine/connect&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="2"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="3"></span><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">rateShipment</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="4"></span><span class="token plain">  </span><span class="token parameter">transaction</span><span class="token parameter punctuation">:</span><span class="token parameter"> Transaction</span><span class="token parameter punctuation">,</span><span class="token parameter"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="5"></span><span class="token parameter">  criteria</span><span class="token parameter punctuation">:</span><span class="token parameter"> RateCriteria</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="6"></span><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Rate</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="7"></span><span class="token plain">  </span><span class="token comment">// Your code here</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="8"></span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></code></pre><form class="invisible code-toolbar_codeToolbar__2r1kC"><button class="button-small">Copy</button><span class="select language-list_languageList__3_g6S language-list_javascript__1RPTJ select_select__2imJS " role="listbox" tabindex="0"><span class="select-label select_selectLabel__2aKYc">javascript</span><span class="select-options select_selectOptions__1F77G "><div class="language-list_language__3ZpVE language-list_javascript__1RPTJ select_option__3vGSw" role="option" aria-selected="true" tabindex="0" data-value="javascript">JavaScript</div><div class="language-list_language__3ZpVE language-list_typescript__1WIoa select_option__3vGSw" role="option" aria-selected="false" tabindex="0" data-value="typescript">TypeScript</div></span></span></form></div><h2 class="html_h2__RJd8Q "><span id="parameters" class="html_headingAnchor__2mM-B" aria-hidden="true"></span>Parameters<a href="#parameters" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h2><h3 class="html_h3__1_Y-e "><span id="transaction" class="html_headingAnchor__2mM-B" aria-hidden="true"></span><code>transaction</code><a href="#transaction" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h3><p>A <a href="/docs/reference/transaction">transaction object</a> containing information about the transaction and session state.</p><h3 class="html_h3__1_Y-e "><span id="criteria" class="html_headingAnchor__2mM-B" aria-hidden="true"></span><code>criteria</code><a href="#criteria" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h3><p>An <em>array</em> of objects containing information used to calculate shipping charges. This object may include a <code>deliveryService</code> and/or a <code>fulfillmentService</code>.</p><p>If these are provided, your method should only return rates that
match all the required criteria. If none of these are provided, your method should return all rates.</p><div class="reference-table_referenceTableWrapper___5de3"><div class="reference-table_toggleLayout__13NAd"><button class="toggle-layout_button__2Sx6u" disabled="" title="Table view"><img src="/img/icons/reference-table.svg" alt="Table view"/></button><button class="toggle-layout_button__2Sx6u" title="Switch to list view"><img src="/img/icons/reference-list.svg" alt="Switch to list view"/></button></div><table><thead><tr><th>Name</th><th>Type</th><th>Nullable?</th><th>Description</th></tr></thead><tbody><tr><td><code class="reference-table_preLine__1NAPb"><span>shipDateTime</span></code></td><td><p><a href="/docs/reference/date-time">date/time object</a></p></td><td class="centered"></td><td><p>The date/time that the shipment is expected to ship. This is not guaranteed to be in the future.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>shipFrom</span></code></td><td><p><a href="/docs/reference/address#address-contact-info-properties">address + contact Info object</a></p></td><td class="centered"></td><td><p>The sender&#x27;s contact info and address.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>shipTo</span></code></td><td><p><a href="/docs/reference/address#address-contact-info-properties">address + contact info object</a></p></td><td class="centered"></td><td><p>The recipient&#x27;s contact info and address.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>pickupLocation</span></code></td><td><p><a href="/docs/reference/address#address-contact-info-pickup-location-properties">address + contact info + pickup location object</a></p></td><td class="centered">✔</td><td><p>The location where the recipient can pick up the shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>returns</span></code></td><td>object</td><td class="centered"></td><td><p>An object that indicates whether or not this shipment is a return shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>returns.isReturn</span></code></td><td>boolean</td><td class="centered"></td><td><p>Indicates whether or not this shipment is a return shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages</span></code></td><td>object[]</td><td class="centered"></td><td><p>The list of packages in the shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].packaging</span></code></td><td>object</td><td class="centered">✔</td><td><p>The packaging that may be used. If not specified, then rate quotes should be returned for all applicable packaging.</p><p>This property may be null. If it is provided, all its required properties, listed below, will be included.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].packaging.id</span></code></td><td><p><a href="https://www.npmjs.com/package/uuid">UUID</a></p></td><td class="centered"></td><td><p>A UUID that uniquely identifies the object. This is the UUID you used in the <a href="/docs/reference/packaging">Packaging Definition</a> file for this packaging.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>packaging
<!-- -->   <!-- -->.</span><span>identifiers</span></code></td><td><p><a href="/docs/reference/identifiers-object">identifiers object</a></p></td><td class="centered"></td><td><p>Your own identifiers for this packaging.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].packaging.code</span></code></td><td>string</td><td class="centered"></td><td><p>Optional code used to map to what the carrier uses to identify the packaging.</p><p>The value <code>custom</code> indicates user-defined packaging. Some of our products allow users to enter custom packaging instead of one of your app&#x27;s pre-defined packaging types.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].packaging.name</span></code></td><td>string</td><td class="centered"></td><td><p>The user-friendly name for this packaging (e.g. &quot;Flat-Rate Box&quot;, &quot;Large Padded Envelope&quot;). This string will not contain newline characters.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>packaging
<!-- -->   <!-- -->.</span><span>description</span></code></td><td>string</td><td class="centered"></td><td><p>A short, user-friendly description of the packaging. This string will not contain newline characters.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>packaging
<!-- -->   <!-- -->.</span><span>requiresWeight</span></code></td><td>boolean</td><td class="centered"></td><td><p>Indicates whether the weight must be specified when using this packaging.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>packaging
<!-- -->   <!-- -->.</span><span>requiresDimensions</span></code></td><td>boolean</td><td class="centered"></td><td><p>Indicates whether the dimensions must be specified when using this packaging.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].dimensions</span></code></td><td>object</td><td class="centered">✔</td><td><p>The dimensions for the package.</p><p>This property may be null. If it is provided, all its required properties, listed below, will be included.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>dimensions
<!-- -->   <!-- -->.</span><span>length</span></code></td><td>number</td><td class="centered"></td><td><p>The length of the package. This value may contain decimals.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>dimensions
<!-- -->   <!-- -->.</span><span>width</span></code></td><td>number</td><td class="centered"></td><td><p>The width of the package. This value may contain decimals.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>dimensions
<!-- -->   <!-- -->.</span><span>height</span></code></td><td>number</td><td class="centered"></td><td><p>The height of the package. This value may contain decimals.</p><p>This property may be null. If it is provided, all its required properties, listed below, will be included.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>dimensions
<!-- -->   <!-- -->.</span><span>unit</span></code></td><td>string</td><td class="centered"></td><td><p>The unit of measurement for the dimensions. Valid values include the following:</p><ul><li><code>in</code> - inches</li><li><code>cm</code> - centimeters</li></ul></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].weight</span></code></td><td>object</td><td class="centered">✔</td><td><p>The weight of the package.</p><p>This property may be null. If it is provided, all its required properties, listed below, will be included.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].weight.value</span></code></td><td>number</td><td class="centered"></td><td><p>The weight value for this package. This value may contain decimals.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].weight.unit</span></code></td><td>string</td><td class="centered"></td><td><p>The unit of measure for this weight. Valid values include the following:</p><ul><li><code>g</code> - grams</li><li><code>oz</code> - ounces</li><li><code>kg</code> - kilograms</li><li><code>lb</code> - pounds</li></ul></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].insuredValue</span></code></td><td>object</td><td class="centered">✔</td><td><p>The insured value of this shipment.</p><p>This property may be null. If it is provided, all its required properties, listed below, will be included.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>insuredValue
<!-- -->   <!-- -->.</span><span>value</span></code></td><td>number</td><td class="centered"></td><td><p>The value of the insured amount.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>insuredValue
<!-- -->   <!-- -->.</span><span>currency</span></code></td><td>string</td><td class="centered"></td><td><p>The currency that the value represents.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>containsAlcohol</span></code></td><td>boolean</td><td class="centered"></td><td><p>Indicates whether the package contains alcohol.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>isNonMachineable</span></code></td><td>boolean</td><td class="centered"></td><td><p>Indicates whether the package cannot be processed automatically due to size, shape, weight, etc. and requires manual handling.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].customs</span></code></td><td><p><a href="/docs/reference/customs">customs object</a></p></td><td class="centered">✔</td><td><p>The customs associated with this package.</p><p>This property may be null. If it is provided, all its required properties, listed in the linked page, will be included.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>package</span></code></td><td>object</td><td class="centered"></td><td><p>Returns the first package in the <code>packages</code> array. Useful for carriers that only support single-piece shipments. This object has all the same properties as the objects in the <code>packages</code> array described above.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryService</span></code></td><td><p><a href="/docs/reference/delivery-service-object#delivery-service-argument">delivery service object</a></p></td><td class="centered">✔</td><td><p>An object that indicates the <a href="/docs/reference/delivery-service">delivery service</a> to get rates for. If neither <code>deliveryService</code> nor <code>fulfillmentService</code> are specified, then rate quotes should be returned for all applicable services.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>fulfillmentService</span></code></td><td><p><a href="/docs/reference/fulfillment-service">fulfillment service string</a></p></td><td class="centered">✔</td><td><p>The <a href="/docs/reference/fulfillment-service">fulfillment service</a> that may be used to fulfill the shipment. If neither <code>deliveryService</code> nor <code>fulfillmentService</code> are specified, then rate quotes should be returned for all applicable services.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryConfirmation</span></code></td><td><p><a href="/docs/reference/delivery-confirmation">delivery confirmation object</a></p></td><td class="centered">✔</td><td><p>The type of package <a href="/docs/reference/delivery-confirmation">delivery confirmation</a> to use for this rate request.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryDateTime</span></code></td><td><p><a href="/docs/reference/date-time">date/time object</a></p></td><td class="centered">✔</td><td><p>The latest date and time that the shipment can be delivered.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>totalInsuredValue</span></code></td><td>object</td><td class="centered">✔</td><td><p>The total insured value of all packages in the shipment. If specified, then rate quotes should include carrier-provided insurance.</p><p>This property may be null. If it is provided, all its required properties, listed below, will be included.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>totalInsuredValue
<!-- -->   <!-- -->.</span><span>currency</span></code></td><td>string</td><td class="centered"></td><td><p>The currency for this value.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>totalInsuredValue.value</span></code></td><td>number</td><td class="centered"></td><td><p>The amount of this value.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>shippingOptions</span></code></td><td><p><a href="/docs/reference/shipping-options">shipping options</a></p></td><td class="centered">✔</td><td><p>The shipping options that are required for this shipment.</p></td></tr></tbody></table></div><h2 class="html_h2__RJd8Q "><span id="return-value" class="html_headingAnchor__2mM-B" aria-hidden="true"></span>Return Value<a href="#return-value" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h2><h3 class="html_h3__1_Y-e "><span id="rates" class="html_headingAnchor__2mM-B" aria-hidden="true"></span><code>rates[]</code><a href="#rates" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h3><p>An array of objects representing the quoted shipping rates based on the specified rate criteria.</p><div class="reference-table_referenceTableWrapper___5de3"><div class="reference-table_toggleLayout__13NAd"><button class="toggle-layout_button__2Sx6u" disabled="" title="Table view"><img src="/img/icons/reference-table.svg" alt="Table view"/></button><button class="toggle-layout_button__2Sx6u" title="Switch to list view"><img src="/img/icons/reference-list.svg" alt="Switch to list view"/></button></div><table><thead><tr><th>Name</th><th>Type</th><th>Required?</th><th>Description</th></tr></thead><tbody><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryService</span></code></td><td><p><a href="/docs/reference/delivery-confirmation-object#delivery-confirmation-return-value">delivery service object</a> or string</p></td><td class="centered">✔</td><td><p>The <a href="/docs/reference/delivery-service">delivery service</a> this rate is for.
This property accepts an object or a string representing the <code>code</code>.</p><p>If an object is provided, it must have the following properties.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryService.id</span></code></td><td><p><a href="https://www.npmjs.com/package/uuid">UUID</a></p></td><td class="centered">✔</td><td><p>A UUID that uniquely identifies the object. This is the UUID you used in the <a href="/docs/reference/delivery-service">Delivery Service Definition</a> file for this delivery service.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryService
<!-- -->   <!-- -->.</span><span>identifiers</span></code></td><td><p><a href="/docs/reference/identifiers-object">identifiers object</a></p></td><td class="centered"></td><td><p>Your own identifiers for this delivery service.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryService.code</span></code></td><td>string</td><td class="centered"></td><td><p>Optional code used to map to what the carrier or marketplace uses to identify the delivery service.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>charges</span></code></td><td><p><a href="/docs/reference/charge">charge object[]</a></p></td><td class="centered">✔</td><td><p>The breakdown of charges for this shipment.  If the carrier does not provide a detailed breakdown, then just use a single charge of type &quot;shipping&quot;. If the carrier does not provide any charges values at all, return a $0 value charge.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>shipDateTime</span></code></td><td><p><a href="/docs/reference/date-time">date/time object</a>, <br/>
or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Date object</a> object, <br/>
or a string representing the date and time in <a href="https://www.w3.org/TR/NOTE-datetime">ISO</a> format.</p></td><td class="centered"></td><td><p>The date/time that the shipment is expected to ship.  This is not guaranteed to be in the future.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryDateTime</span></code></td><td><p><a href="/docs/reference/date-time">date/time object</a>, <br/>
or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Date object</a> object, <br/>
or a string representing the date and time in <a href="https://www.w3.org/TR/NOTE-datetime">ISO</a> format.</p></td><td class="centered"></td><td><p>The estimated date and time the shipment will be delivered.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>isNegotiatedRate</span></code></td><td>boolean</td><td class="centered"></td><td><p>Indicates whether this shipment used a pre-negotiated terms.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>isTrackable</span></code></td><td>boolean</td><td class="centered"></td><td><p>Indicates whether tracking numbers are provided.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryConfirmation</span></code></td><td><p><a href="/docs/reference/delivery-confirmation-object#delivery-confirmation-return-value">delivery confirmation object</a> or string</p></td><td class="centered"></td><td><p>The <a href="/docs/reference/delivery-confirmation">delivery confirmation</a> included in this rate. This property accepts an object or a string representing the <code>id</code>, <code>code</code>, or <code>type</code>.</p><p>If an object is provided, it must have the following properties.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryConfirmation.id</span></code></td><td><p><a href="https://www.npmjs.com/package/uuid">UUID</a></p></td><td class="centered">✔</td><td><p>UUID that uniquely identifies the delivery confirmation. This ID should never change.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryConfirmation
<!-- -->   <!-- -->.</span><span>identifiers</span></code></td><td><p><a href="/docs/reference/identifiers-object">identifiers object</a></p></td><td class="centered"></td><td><p>Your own identifiers for this delivery confirmation.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>deliveryConfirmation.code</span></code></td><td>string</td><td class="centered"></td><td><p>Optional code used to map to what the carrier or marketplace uses to identify the packaging.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>notes</span></code></td><td>object[]</td><td class="centered"></td><td><p>An array of objects containing additional information about this rate.</p><p>This property is not required. If it is provided, it must contain all of its required properties, listed below.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>notes[].type</span></code></td><td><p><a href="/docs/reference/common-types#notes-types">notes type string</a></p></td><td class="centered">✔</td><td><p>The type for this note.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>notes[].text</span></code></td><td>string</td><td class="centered">✔</td><td><p>The note text itself.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages</span></code></td><td>object[]</td><td class="centered"></td><td><p>An array of objects describing the list of packages in the shipment.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].packaging</span></code></td><td><p>object or string</p></td><td class="centered">✔</td><td><p>The packaging this rate is for. This property accepts an object or a string representing the <code>code</code>.</p><p>This property is not required. If it is provided, it must contain all of its required properties, listed below.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].packaging.id</span></code></td><td><p><a href="https://www.npmjs.com/package/uuid">UUID</a></p></td><td class="centered">✔</td><td><p>A UUID that uniquely identifies the object. This is the UUID you used in the <a href="/docs/reference/packaging">Packaging Definition</a> file for this packaging type.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[]
<!-- -->   <!-- -->.</span><span>packaging
<!-- -->   <!-- -->.</span><span>identifiers</span></code></td><td><p><a href="/docs/reference/identifiers-object">identifiers object</a></p></td><td class="centered"></td><td><p>Your own identifiers for this packaging.</p></td></tr><tr><td><code class="reference-table_preLine__1NAPb"><span>packages[].packaging.code</span></code></td><td>string</td><td class="centered"></td><td><p>Optional code used to map to what the carrier or marketplace uses to identify the packaging.</p><p>The value <code>custom</code> indicates user-defined packaging. Some of our products allow users to enter custom packaging instead of one of your app&#x27;s pre-defined packaging types.</p></td></tr></tbody></table></div><h2 class="html_h2__RJd8Q "><span id="example" class="html_headingAnchor__2mM-B" aria-hidden="true"></span>Example<a href="#example" class="html_headingAnchorLink__1Q-xX" aria-hidden="true"></a></h2><div class="code-wrapper_codeWrapper__ssrf6"><pre class="language-javascript code-wrapper_selectedCodeBlock__ISwuh code-block_pre__2tvH1"><code class="code-block_codeBlock__18cdI"><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="1"></span><span class="token plain">module</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">rateShipment</span><span class="token punctuation">(</span><span class="token parameter">transaction</span><span class="token parameter punctuation">,</span><span class="token parameter"> shipment</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="2"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="3"></span><span class="token plain">  </span><span class="token comment">// STEP 1: Validation</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="4"></span><span class="token plain">  </span><span class="token comment">// TODO: add any validation logic here</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="5"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="6"></span><span class="token plain">  </span><span class="token comment">// STEP 2: Create the data that the carrier&#x27;s API expects</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="7"></span><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> data </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="8"></span><span class="token plain">    operation</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&quot;quote_rates&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="9"></span><span class="token plain">    session_id</span><span class="token punctuation">:</span><span class="token plain"> transaction</span><span class="token punctuation">.</span><span class="token property-access">session</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="10"></span><span class="token plain">    service_codes</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">deliveryService</span><span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="11"></span><span class="token plain">    confirmation_codes</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">deliveryConfirmation</span><span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="12"></span><span class="token plain">    parcel_codes</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">packages</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">packaging</span><span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="13"></span><span class="token plain">    ship_date</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">shipDateTime</span><span class="token punctuation">.</span><span class="token method function property-access">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="14"></span><span class="token plain">    delivery_date</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">deliveryDateTime</span><span class="token punctuation">.</span><span class="token method function property-access">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="15"></span><span class="token plain">    from_zone</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">shipFrom</span><span class="token punctuation">.</span><span class="token property-access">postalCode</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="16"></span><span class="token plain">    to_zone</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">shipTo</span><span class="token punctuation">.</span><span class="token property-access">postalCode</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="17"></span><span class="token plain">    total_weight</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">packages</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">weight</span><span class="token punctuation">.</span><span class="token property-access">ounces</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="18"></span><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="19"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="20"></span><span class="token plain">  </span><span class="token comment">// STEP 3: Call the carrier&#x27;s API</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="21"></span><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> response </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">await</span><span class="token plain"> apiClient</span><span class="token punctuation">.</span><span class="token method function property-access">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> data </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="22"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="23"></span><span class="token plain">  </span><span class="token comment">// STEP 4: Create the output data that ShipEngine expects</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="24"></span><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> response</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token plain">formatRate</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="25"></span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></code></pre><pre class="language-typescript code-wrapper_codeBlock__lj1ex code-block_pre__2tvH1"><code class="code-block_codeBlock__18cdI"><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="1"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="2"></span><span class="token plain">  </span><span class="token maybe-class-name">ChargeType</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="3"></span><span class="token plain">  </span><span class="token maybe-class-name">RateCriteria</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="4"></span><span class="token plain">  </span><span class="token maybe-class-name">Rate</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="5"></span><span class="token plain">  </span><span class="token maybe-class-name">Transaction</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="6"></span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&quot;@shipengine/connect&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="7"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="8"></span><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">rateShipment</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="9"></span><span class="token plain">  </span><span class="token parameter">transaction</span><span class="token parameter punctuation">:</span><span class="token parameter"> Transaction</span><span class="token parameter operator">&lt;</span><span class="token parameter">Session</span><span class="token parameter operator">&gt;</span><span class="token parameter punctuation">,</span><span class="token parameter"> shipment</span><span class="token parameter punctuation">:</span><span class="token parameter"> RateCriteria</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Rate</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="10"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="11"></span><span class="token plain">  </span><span class="token comment">// STEP 1: Validation</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="12"></span><span class="token plain">  </span><span class="token comment">// TODO: add any validation logic here</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="13"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="14"></span><span class="token plain">  </span><span class="token comment">// STEP 2: Create the data that the carrier&#x27;s API expects</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="15"></span><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> data</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">QuoteRatesRequest</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="16"></span><span class="token plain">    operation</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&quot;quote_rates&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="17"></span><span class="token plain">    session_id</span><span class="token punctuation">:</span><span class="token plain"> transaction</span><span class="token punctuation">.</span><span class="token property-access">session</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="18"></span><span class="token plain">    service_codes</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">deliveryService</span><span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="19"></span><span class="token plain">    confirmation_codes</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">deliveryConfirmation</span><span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="20"></span><span class="token plain">    parcel_codes</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">packages</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">packaging</span><span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="21"></span><span class="token plain">    ship_date</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">shipDateTime</span><span class="token punctuation">.</span><span class="token method function property-access">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="22"></span><span class="token plain">    delivery_date</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">deliveryDateTime</span><span class="token punctuation">.</span><span class="token method function property-access">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="23"></span><span class="token plain">    from_zone</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">shipFrom</span><span class="token punctuation">.</span><span class="token property-access">postalCode</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="24"></span><span class="token plain">    to_zone</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token plain">shipment</span><span class="token punctuation">.</span><span class="token property-access">shipTo</span><span class="token punctuation">.</span><span class="token property-access">postalCode</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="25"></span><span class="token plain">    total_weight</span><span class="token punctuation">:</span><span class="token plain"> shipment</span><span class="token punctuation">.</span><span class="token property-access">packages</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">weight</span><span class="token punctuation">.</span><span class="token property-access">ounces</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="26"></span><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="27"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="28"></span><span class="token plain">  </span><span class="token comment">// STEP 3: Call the carrier&#x27;s API</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="29"></span><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> response </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">await</span><span class="token plain"> apiClient</span><span class="token punctuation">.</span><span class="token property-access">request</span><span class="token operator">&lt;</span><span class="token maybe-class-name">QuoteRatesResponse</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> data </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="30"></span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="31"></span><span class="token plain">  </span><span class="token comment">// STEP 4: Create the output data that ShipEngine expects</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="32"></span><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> response</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token plain">formatRate</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="line_line__3fO_7 "><span class="line_lineNumber__trKSL" data-line-number="33"></span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></code></pre><form class="invisible code-toolbar_codeToolbar__2r1kC"><button class="button-small">Copy</button><span class="select language-list_languageList__3_g6S language-list_javascript__1RPTJ select_select__2imJS " role="listbox" tabindex="0"><span class="select-label select_selectLabel__2aKYc">javascript</span><span class="select-options select_selectOptions__1F77G "><div class="language-list_language__3ZpVE language-list_javascript__1RPTJ select_option__3vGSw" role="option" aria-selected="true" tabindex="0" data-value="javascript">JavaScript</div><div class="language-list_language__3ZpVE language-list_typescript__1WIoa select_option__3vGSw" role="option" aria-selected="false" tabindex="0" data-value="typescript">TypeScript</div></span></span></form></div></div><div class="section-group right-group"><nav id="table-of-contents" class="table-of-contents_toc__2VPfA"><a href="#">rateShipment()</a><a href="#syntax">Syntax</a><a href="#parameters">Parameters</a><a href="#return-value">Return Value</a><a href="#example">Example</a></nav></div></div></article></main></div></div><footer class="footer_siteFooter__ugPCM"><div class="centered-content"><nav class="footer_footerNav__2pDuj"><div class="footer_column__21zWj"><div class="footer_columnHeading__RUP2K">Products</div><ul><li><a href="https://www.shipengine.com/shipping/">Shipping</a></li></ul><div class="footer_columnHeading__RUP2K">Pricing</div><ul><li><a href="https://www.shipengine.com/pricing/">Plans</a></li></ul></div><div class="footer_column__21zWj"><div class="footer_columnHeading__RUP2K">Solutions</div><ul><li><a href="https://www.shipengine.com/e-commerce-platforms/">E-commerce Platforms</a></li><li><a href="https://www.shipengine.com/third-party-logistics/">Third Party Logistics</a></li><li><a href="https://www.shipengine.com/brands/">Brands</a></li></ul><div class="footer_columnHeading__RUP2K">Integrations</div><ul><li><a href="https://www.shipengine.com/integrations/carriers/">Carriers</a></li><li><a href="https://www.shipengine.com/integrations/marketplaces/">Marketplaces</a></li></ul></div><div class="footer_column__21zWj"><div class="footer_columnHeading__RUP2K">Developers</div><ul><li><a href="https://www.shipengine.com/docs/">Documentation</a></li><li><a href="https://status.shipengine.com/">API Status</a></li></ul></div><div class="footer_column__21zWj"><div class="footer_columnHeading__RUP2K">Company</div><ul><li><a href="https://www.shipengine.com/about/">About</a></li><li><a href="https://www.shipengine.com/customers/">Customers</a></li><li><a href="https://www.shipengine.com/blog/">Blog</a></li><li><a href="https://www.shipengine.com/contact/">Contact</a></li><li><a href="https://help.shipengine.com/">Support</a></li><li><a href="https://gear.shipengine.com/">ShipEngine Gear Shop</a></li><li><a href="https://www.shipengine.com/privacy-policy/">Privacy Policy</a></li><li><a href="https://www.shipengine.com/terms-of-service/">Terms of Service</a></li></ul></div><div class="footer_socialMediaIcons__1UaL_"><div class="heading visually-hidden">Social Media</div><ul><li><a href="https://www.instagram.com/shipengineapi/" class="footer_instagram__HpTyY"><span class="visually-hidden">ShipEngine on Instagram</span></a></li><li><a href="https://www.facebook.com/ShipEngineAPI/" class="footer_facebook__3HupI"><span class="visually-hidden">ShipEngine on Facebook</span></a></li><li><a href="https://twitter.com/ShipEngineAPI" class="footer_twitter__I4Q8B"><span class="visually-hidden">ShipEngine on Twitter</span></a></li><li><a href="https://www.linkedin.com/company/shipengine/" class="footer_linkedin__2R042"><span class="visually-hidden">ShipEngine on LinkedIn</span></a></li></ul></div></nav><p class="footer_copyright__2o-gO">© 2019 Shipengine. All rights reserved</p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/docs/reference/methods/rate-shipment","query":{},"buildId":"xm6gAVI8G4BgGZs7KyjTp","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>